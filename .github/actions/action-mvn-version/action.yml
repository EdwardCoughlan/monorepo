name: "Maven Version"
description: "Gets next MVN version of a service"

inputs:
  PATH:
    required: true
    description: "The path of the service to get the version from"
  RELEASE:
    required: true
    description: "Indicates if it is a release"

runs:
  using: "composite"

  steps:
    - uses: actions/setup-java@v3
      with:
        distribution: "corretto"
        java-version: "17"
        cache: "maven"

    - name: Version generation
      id: version-generation
      run: |
        cd ${{ inputs.PATH }}
        if [[ ${{ inputs.RELEASE }} == true ]]; then
          echo "version=$(mvn help:evaluate -Dexpression=project.version -q -DforceStdout)" >> $GITHUB_OUTPUT
        else
          echo "version=latest" >> $GITHUB_OUTPUT
        fi
      shell: bash
